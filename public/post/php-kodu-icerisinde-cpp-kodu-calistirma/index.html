<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Php ile CPP kodları çalıştırmak - PHP Analiz - Uğur KAZDAL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="PHP Analiz - Php ile ilgili garip içeriklere sahip orjinal site.">
  <meta name="author" content="Uğur KAZDAL">
  <meta name="keywords" content="php, html5, jquery,hugo,go lang">
  <link rel="canonical" href="https://phpanaliz.com/post/php-kodu-icerisinde-cpp-kodu-calistirma/">
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-3789690953881934",
      enable_page_level_ads: true
    });
  </script>
  <link rel="stylesheet" type="text/css" href="https://phpanaliz.com//css/combined-min.css">

</head>
<body class="">

<div class="site-wrap">
  <header class="site-header px2 px-responsive">
  <div class="mt2 wrap">
    <div class="measure">
      <a href="https://phpanaliz.com/" class="site-title">PHP Analiz - Uğur KAZDAL</a>
      <nav class="site-nav right">
      <a href="https://phpanaliz.com/tags/">Konular</a>
<a href="https://phpanaliz.com//page/hakkimda/">Hakkımda</a>
<a href="https://phpanaliz.com//page/iletisim/">İletişim</a>
<a href="https://phpanaliz.com//page/gizlilik/">Gizlilik</a><form id="search" method="get" action="/page/search/">
    <input type="text" name="kelime" id="kelime" placeholder="Arama"/>
    </form>
</form>

      </nav>
      <div class="clearfix"></div>
    </div>
  </div>
</header>

  <div class="post p2 p-responsive wrap" role="main">
    <div class="measure">
      <div class="post-header mb2">
        <h1 class="py2">Php ile CPP kodları çalıştırmak</h1>
       
        
      </div>

      <article class="post-content">
      <p><strong><em>PHP</em></strong> geliştirirken bazı durumlarda başka dillerden desteğe ihtiyacınız olabilir. PHP içerisinde benim en çok ihtiyacım olan dil genellikle <strong><em>cpp</em></strong> oluyor. Bu yazı da PHP kodu içerisinde örnek CPP kodları çalıştırabileceğimiz bir kaç yöntem üzerine konuşalım istedim.</p>

<p>İlk kurgumuz şu şekilde, C++ ile yazılmış veya yazacağımız bir yapımız var, bunu PHP içerisinde kullanmak istiyoruz. Ne yapmalıyız? <strong><em>Cevap</em></strong> Wrapper kodlamak. PHP&rsquo;nin yazdığımı kodu anlayabilmesi için bir eklenti geliştirmek.</p>

<p>İkinci kurgumuz, o kadar büyük abartılı değil basit olarak ne yapılabilir. Bu soru üniversitede ya da lise de ödev sorusu gibi gözüküyor. Bunu hemen cevaplayalım, php-cpp diye bir eklentimiz var. PHP için eklenti geliştirmeyi çok kolay hale getiriyor.</p>

<p>Bu yazıda ikinci kurgudan ilerliyoruz. Çünkü işlerimiz acil ve pratik çözüme ihtiyacımız var.</p>

<p>İlk olarak söyliyeyim, bu sistemin geliştiricisi sadece Linux dağıtımları kullandığı için Windows üzerinde çalışıp çalışmamasını umursamamış.</p>

<p>Hadi başlayalım,</p>

<pre><code>$ git clone https://github.com/CopernicaMarketingSoftware/PHP-CPP.git
</code></pre>

<p>Linux bir makinedeysek, yapmamız gereken tek şey dizine girip <strong><em>make</em></strong> komutunu çalıştırıp eklentiyi inşaa etmek.</p>

<p>Eğer MacOS üzerindeyseniz <strong><em>makefile</em></strong> üzerinde bir değişiklik yapmanız gerekiyor. makefile dosyasını açın ve <strong><em>LINKER_FLAGS</em></strong>  gelip <strong><em>-undefined dynamic_lookup</em></strong> tanımlamasını ekleyin.</p>

<pre><code>$ sudo make install
</code></pre>

<p>Dediğimizde PHP-CPP eklentisi inşaa edilmiş olacak.</p>

<p>Linux üzerinden devam ediyoruz.</p>

<p><strong><em>Makefile</em></strong> dosyamızı düzenleyelim</p>

<pre><code>NAME                =   cilgineklentim
UBUNTU_MAJOR  := $(shell /usr/bin/lsb_release -r -s | cut -f1 -d.)
OVER_SIXTEEN  := $(shell echo &quot;${UBUNTU_MAJOR} &gt;= 16&quot; | bc)
OVER_FOURTEEN := $(shell echo &quot;${UBUNTU_MAJOR} &gt;= 14&quot; | bc)

ifeq (${OVER_SIXTEEN}, 1)
    INI_DIR     =   /etc/php/7.0/mods-available/
else ifeq (${OVER_FOURTEEN}, 1)
    INI_DIR     =   /etc/php5/mods-available/
else
    INI_DIR     =   /etc/php5/conf.d/
endif
EXTENSION_DIR       =   $(shell php-config --extension-dir)
EXTENSION           =   ${NAME}.so
INI                 =   ${NAME}.ini
COMPILER            =   g++
LINKER              =   g++
COMPILER_FLAGS      =   -Wall -c -O2 -std=c++11 -fpic -o
LINKER_FLAGS        =   -shared
LINKER_DEPENDENCIES =   -lphpcpp
RM                  =   rm -f
CP                  =   cp -f
MKDIR               =   mkdir -p
SOURCES             =   $(wildcard *.cpp)
OBJECTS             =   $(SOURCES:%.cpp=%.o)
all:                    ${OBJECTS} ${EXTENSION}
${EXTENSION}:           ${OBJECTS}
                        ${LINKER} ${LINKER_FLAGS} -o $@ ${OBJECTS} ${LINKER_DEPENDENCIES}
${OBJECTS}:
                        ${COMPILER} ${COMPILER_FLAGS} $@ ${@:%.o=%.cpp}
install:        
                        ${CP} ${EXTENSION} ${EXTENSION_DIR}
                        ${CP} ${INI} ${INI_DIR}
clean:
                        ${RM} ${EXTENSION} ${OBJECTS}
</code></pre>

<p><strong><em>cilgineklemtim.ini</em></strong> dosyamız da eklentimizi tanımlıyoruz
    extension=cilgineklentim.so</p>

<p>*<strong>Main.cpp</strong>
    #include <phpcpp.h>
    #include <iostream></p>

<pre><code>void MerhabaCinim (Php::Parameters &amp;params)
{
    std::string name=params[0];
    std::cout&lt;&lt;&quot;Selams &quot;&lt;&lt;name&lt;&lt;&quot;!&quot;&lt;&lt;std::endl;

}
extern &quot;C&quot; {
    PHPCPP_EXPORT void *get_module() 
    {
        //statik olmasının nednei Php:extension tüm işlem süresince ram'de bulunmalı.
        static Php::Extension extension(&quot;cilgineklentim&quot;, &quot;1.0&quot;);
        extension.add(&quot;MerhabaCinim&quot;, MerhabaCinim);
               return extension;
    }
}
</code></pre>

<p>Örnek bir eklenti ve bir fonksiyon hazırladık, şimdi derleyelim
    make &amp;&amp; sudo make install</p>

<p>Ardından dosyaları php&rsquo;mizin bulunduğu dizine ve eklenti dizinine ekliyoruz.
    cp -f skeleton.so /usr/lib/php5/20121212
    cp -f skeleton.ini /etc/php5/cli/conf.d</p>

<p>Eğer eklenti dizinini bilmiyorsanız hemen,</p>

<pre><code>apt-get install php-config
php-config --extension-dir
</code></pre>

<p>ile öğrenebilirsiniz.Bi dk durun sakin olun gerek yok
    php -i | grep extension_dir</p>

<p>ile de görebiliyorsunuz :)</p>

<p>Ardından php&rsquo;mizin bu eklentiyi yükleyip yüklemediğini görelim</p>

<pre><code>php -i | grep cilgineklentim
</code></pre>

<p>Bu komut sonrasında ekranda hem eklentimizin ini dosyası yolu hem de adı yazmalı</p>

<p>Artık php içerisinde eklentimizi kullanabiliriz</p>

<pre><code>&lt;?php

echo MerhabaCinim('naptin');
</code></pre>

<p>İşin en temeli bu, abartmak isteyenler için,<a href="http://www.php-cpp.com/documentation">bu adres</a> birebir.</p>

      </article>

      <p class="post-meta">Etiketler:&nbsp;
        
            
            <a href="https://phpanaliz.com//tags/php">php</a>
        
            ,&nbsp;
            <a href="https://phpanaliz.com//tags/cpp">cpp</a>
        
      </p>

      

    </div>
  </div>
</div>
    <footer class="footer">
      <div class="p2 wrap">
        <div class="measure mt1 center">
      <nav class="social-icons icons">
<a class="fa fa-rss rss" href="https://phpanaliz.com/index.xml"></a>

</nav>

          <small>
            Copyright &#169; 2017<br>
            Her Hakkı Uğur KAZDAL'a aittir.
          </small>
        </div>
      </div>
    </footer>

    
    <script src="https://phpanaliz.com/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-101420301-2', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

